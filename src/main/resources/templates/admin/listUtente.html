<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

	<nav th:insert="~{fragments/navigation :: block-navigation('Elenco Utente')}"></nav>

		<div class="container mt-3" align="center">
		
				<div align="center" class="container  mt-3">
					<table class="table table-secondary w-50">
						<thead>
							<tr align="center">
								<th>User name</th>
								<th>Email</th>
								<th>Role</th>
								<th>
									<a th:href="@{/admin/createUtente}" class="btn btn-primary">Create Utente</a>
								</th>	
							</tr>
						</thead>
						<tbody>
							<tr th:each="ut : ${utente}"
									th:attr="data-id=${ut.id}"
										class="clickable-row" style='cursor: pointer'>
								<td th:text="${ut.userName}" align="center"></td>
								<td th:text="${ut.email}" align="center"></td>
								<td th:text="${ut.role}" align="center"></td>
							</tr>
		
						</tbody>
				</table>
		
		
		</div>
	
	<script>
	  document.addEventListener("DOMContentLoaded", function () {
	        const rows = document.querySelectorAll(".clickable-row");
	        rows.forEach(row => {
	            row.addEventListener("click", () => {
	                const utenteId = row.getAttribute("data-id");
	                if (utenteId) {
	                    window.location.href = `/admin/updateUtente?id=${utenteId}`;
	                }
	            });
	        });
	    });

	</script>
	
	
</body>
</html>	